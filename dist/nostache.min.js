!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nostache=t()}(this,(function(){"use strict";function e(e,t,o,n){return new(o||(o=Promise))((function(r,s){function c(e){try{f(n.next(e))}catch(e){s(e)}}function i(e){try{f(n.throw(e))}catch(e){s(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,i)}f((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const t={},o=t=>e(void 0,void 0,void 0,(function*(){return String(yield t).replace(/[&<>"']/g,(e=>`&#${e.charCodeAt(0)};`))})),n=r=>{var s;const c=null!==(s=t[r])&&void 0!==s?s:t[r]=(e=>{const t=e=>{if(e.length>1){const t={};for(let o=0;o<e.length;o++)t[e.charCodeAt(o)]=!0;return t}return e.charCodeAt(0)},o=t(" \t\r\n"),n=t("<"),r=t(">"),s=t("{"),c=t("}"),i=t("="),f=t("~"),l=t("\\"),a=t("'"),u=t('"'),d=t("`"),h=t("$");let p=0,y=0;const $=e.length;let g="";const v=(t=p,o="")=>{(t>y||o)&&(g+=`yield \`${e.slice(y,t)}${o}\`;\n`)},A=t=>{p>y&&(g+=t?`yield ${e.slice(y,p)};\n`:`yield this.escape(${e.slice(y,p)});\n`)},C=()=>{p>y&&(g+=`${e.slice(y,p)}`)},b=t=>t===n&&e.charCodeAt(p+1)===s?(v(),p+=2,m(),!0):t===s&&e.charCodeAt(p+1)===i?(v(),p+=2,w(!1),!0):t===s&&e.charCodeAt(p+1)===f?(v(),p+=2,w(!0),!0):t===l?(v(p,"\\\\"),p++,y=p,!0):t===d?(v(p,"\\`"),p++,y=p,!0):t===h&&(v(p,"\\$"),p++,y=p,!0),m=()=>{y=p;let t=0,h=!0;for(;p<$;){const $=e.charCodeAt(p);if(t||$!==a&&$!==u&&$!==d)if(t&&$===l)p+=2;else if(t&&$===t)t=0,p++;else if(t||$!==s)if(h&&o[$])p++;else if(h&&$===n)h=!1,C(),j();else if(!h||$!==i&&$!==f){if(!t&&$===c&&e.charCodeAt(p+1)===r){C(),p+=2;break}p++,h=!1}else h=!1,C(),p++,w($===f),y--;else p++,h=!0;else t=$,p++,h=!1}y=p},j=()=>{y=p;let t=-1;for(;p<$;){const n=e.charCodeAt(p);if(n===r)p++,t=p;else if(t>=0&&o[n])p++;else{if(t>=0&&n===c){v(t);break}b(n)||(p++,t=-1)}}y=p},w=t=>{y=p;const n=t?f:i;let r=!1,s=0;for(;p<$;){const i=e.charCodeAt(p);if(s||i!==a&&i!==u&&i!==d)if(s&&i===l)p+=2;else if(s&&i===s)s=0,p++;else{if(!s&&i===n&&e.charCodeAt(p+1)===c){r&&A(t),p+=2;break}o[i]?p++:(p++,r=!0)}else s=i,p++,r=!0}y=p};for(;p<$;){const t=e.charCodeAt(p);b(t)||p++}return v(),`return(async function*(){\n${g}}).call(this)`})(r),i=(...t)=>e(void 0,void 0,void 0,(function*(){const e=[],o=[];for(const n of t)if(n&&"object"==typeof n&&!Array.isArray(n))for(const t in n)/^[_a-z]\w*$/i.test(t)&&(e.push(t),o.push(n[t]));try{i.verbose&&(console.groupCollapsed(`(function Nostache(${e.join(", ")}) {`),console.log(`${c}})\n(`,...o.reduce(((e,t)=>(e.length>0&&e.push(","),e.push("string"==typeof t?`"${t}"`:t),e)),[]),")"),console.groupEnd());const n=(...e)=>i(...e);for(let e=0;e<t.length;e++)n[e]=t[e];n.escape=i.escape;const r=Function(...e,c).apply(n,o);let s="";for(;;){const e=yield r.next();if(e.done)break;s+=e.value}return s}catch(t){throw t.message+=`\nat function (${e.join(", ")}) {\n${c}\n})(${o.map((e=>"string"==typeof e?`"${e}"`:e)).join(", ")})`,t}}));return i.verbose=n.verbose,i.escape=o,i.toString=()=>c,i};return n.verbose=!1,n.escape=o,n}));//# sourceMappingURL=nostache.min.js.map
