!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nostache=t()}(this,(function(){"use strict";const e={},t=(e,t)=>(null==t?void 0:t.async)?`async ${e}`:e,n=e=>{if("function"==typeof e.next){let t="",o=()=>new Promise((t=>t(e.next()))).then((e=>e.done?t:n(e.value).then((e=>t+=e)).then(o)));return o().then((()=>t))}return new Promise((t=>t(e)))},o=(r,i)=>{if("string"==typeof r){const n=t(r,i);if(e[n])return e[n]}const c=(...s)=>new Promise((e=>e(r))).then((r=>{const l=t(r,i);e[l]&&e[l]!==c&&e[l](...s);const f=((e,t)=>{const n=e=>{if(e.length>1){const t={};for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=!0;return t}return e.charCodeAt(0)},o=n(" \t\r\n"),r=e=>95===e||e>=65&&e<=90||e>=97&&e<=122,i=e=>r(e)||e>=48&&e<=57,c=n("<"),s=n(">"),l=n("{"),f=n("}"),a=n("("),d=n(")"),h=n("="),u=n("~"),C=n("/"),A=n("*"),p=n("\n"),$=n("\\"),b=n("'"),y=n('"'),g=n("`"),k=n("$"),m=n("@");let v=0,x=0;const w=e.length;let P="";const j=(t=v,n="")=>{(t>x||n)&&(P+=`yield \`${e.slice(x,t)}${n}\`;\n`)},S=t=>{v>x&&(P+=t?`yield (${e.slice(x,v)});\n`:`yield this.escape(${e.slice(x,v)});\n`)},T=()=>{v>x&&(P+=`${e.slice(x,v)}`)},E=t=>{const n=e.charCodeAt(v+1);return t===c&&n===l?(j(),v+=2,F(),!0):t===l&&n===h?(j(),v+=2,z(!1),!0):t===l&&n===u?(j(),v+=2,z(!0),!0):t===l&&n===m?(j(),v+=2,D(),!0):t===$?(j(v,"\\\\"),v++,x=v,!0):t===g?(j(v,"\\`"),v++,x=v,!0):t===k&&(j(v,"\\$"),v++,x=v,!0)},F=()=>{x=v;let t=!0;for(;v<w;){if(B()){t=!1;continue}const n=e.charCodeAt(v);if(n===l){v++;const n=e.charCodeAt(v);n===s?(t=!1,T(),v++,q()):n===h||n===u?(t=!1,T(),v++,z(n===u),x--):n===m?(t=!1,v--,T(),v+=2,D()):t=!0}else if(t&&o[n])v++;else if(t&&n===c)t=!1,T(),N();else{if(n===f&&e.charCodeAt(v+1)===s){T(),v+=2;break}v++,t=!1}}x=v},N=()=>{x=v;let t=-1;for(;v<w;){const n=e.charCodeAt(v);if(n===s)v++,t=v;else if(t>=0&&o[n])v++;else{if(t>=0&&n===f){j(t);break}E(n)||(v++,t=-1)}}x=v},q=()=>{x=v;let t=-1,n=-1,r=!1;for(;v<w;){const i=e.charCodeAt(v);if(!r&&o[i])x++,v++;else if(r&&(i===c||o[i]))n<0&&(n=v),i===c&&(t=v),v++;else if(t>=0&&o[i])v++;else{if(t>=0&&i===f){j(n);break}E(i)||(v++,t=-1,n=-1),r=!0}}x=v},z=t=>{x=v;const n=t?u:h;let r=!1;for(;v<w;){if(B()){r=!0;continue}const i=e.charCodeAt(v);if(!r&&o[i])v++;else{if(i===n&&e.charCodeAt(v+1)===f){r&&S(t),v+=2;break}v++,r=!0}}x=v},B=()=>{let t=0,n=0,o=!1;for(;v<w;){const r=e.charCodeAt(v);let i=0;if(t||n||r!==b&&r!==y&&r!==g)if(t&&r===$)v+=2;else{if(t&&r===t)return t=0,v++,!0;if(t||n||r!==C||(i=e.charCodeAt(v+1))!==C&&i!==A)if(n===C&&r===p)n=0,v++;else{if(n===A&&r===A&&e.charCodeAt(v+1)===C)return n=0,v+=2,!0;if(!n&&!t)return!1;v++}else n=i,v+=2,o=!0}else t=r,v++,o=!0}return o},D=()=>{x=v;let t=0,n=!1,o="";for(;v<w;){let c=e.charCodeAt(v);if(t){if(!n||!i(c)){if(n&&!i(c)){if(o=e.slice(x,v),c=J(c),c===a){v++,I(o);break}if(c===b||c===y||c===g){x=v,v++,H(o);break}G();break}G();break}v++}else{if(c=J(c),x=v,t=c,c===a){v++,I();break}if(c===b||c===y||c===g){v++,H();break}if(!r(t)){G();break}v++,n=!0}}J(e.charCodeAt(v)),x=v},G=()=>{for(;v<w;){if(e.charCodeAt(v)===m&&e.charCodeAt(v+1)===f&&v>x){P+=`let[${e.slice(x,v)}]=this;\n`,v+=2;break}v++}},H=t=>{for(;v<w;){if(e.charCodeAt(v)===m&&e.charCodeAt(v+1)===f&&v>x){t&&(P+=`let ${t}=`),P+=`this.load(${e.slice(x,v)})\n`,v+=2;break}v++}},I=n=>{x=v;let r="",i=0;for(;v<w;){const t=e.charCodeAt(v);if(t===a)i++;else if(t===d){if(!i){r=e.slice(x,v),v++,J(e.charCodeAt(v)),x=v;break}i--,v++}else v++}const c=P;let s=-1;for(P="";v<w;){const i=e.charCodeAt(v);if(o[i])s=v,v++;else{if(i===m&&e.charCodeAt(v+1)===f){j(s>-1?s:v);const e=P;P=c,n&&(P+=`let ${n}=`),P+=`(${(null==t?void 0:t.async)?"async ":""}function*(${r}){${e}}.bind(this))\n`,v+=2;break}E(i)||v++}}},J=t=>{for(;v<w&&o[t];)v++,t=e.charCodeAt(v);return t};for(;v<w;){const t=e.charCodeAt(v);E(t)||v++}return j(),`return(${(null==t?void 0:t.async)?"async ":""}function*(){\n${P}}).call(this)`})(r,i);e[l]=c;try{o.verbose&&(console.groupCollapsed("(function () {"),console.log(`${f}})\n(`,...s.reduce(((e,t)=>(e.length>0&&e.push(","),e.push("string"==typeof t?`"${t}"`:t),e)),[]),")"),console.groupEnd());const e=(...e)=>c(...e);e[Symbol.iterator]=function*(){yield*s};for(let t=0;t<s.length;t++)e[t]=s[t];return e.load=o.load,e.escape=o.escape,n(Function(f).apply(e))}catch(e){throw e.message+=`\nat function () {\n${f}\n})(${s.map((e=>"string"==typeof e?`"${e}"`:e)).join(", ")})`,e}}));return c};return o.verbose=!1,o.load=(e,t)=>o(fetch(e,t).then((e=>e.text()))),o.escape=e=>n(e).then((e=>String(e).replace(/[&<>"']/g,(e=>`&#${e.charCodeAt(0)};`)))),o}));//# sourceMappingURL=nostache.min.js.map
