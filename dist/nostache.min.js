!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nostache=t()}(this,(function(){"use strict";const e="async",t="import",n="function",o=void 0,i=e=>"string"==typeof e,s=e=>typeof e===n,r=e=>{if(e&&s(e.next)){let t="",n=()=>new Promise((t=>t(e.next()))).then((e=>e.done?t:r(e.value).then((e=>t+=e)).then(n)));return n().then((()=>t))}return new Promise((t=>t(e)))},c=Function("try{return this===window;}catch(e){}")(),l=(f,a)=>{a=Object.assign(Object.assign({},l.options),a);const u=Object.assign(Object.assign({},l.options?l.options.extensions:o),a?a.extensions:o),h=a.cache,d=h===o||!0===h,$=d||h===t,p=d||h===n,g=e=>r(e).then(s(a.escape)?a.escape:e=>e===o||null===e?"":String(e).replace(/[&<>"']/g,(e=>`&#${e.charCodeAt(0)};`))),b=e=>(...n)=>l(new Promise(((n,i)=>{const r=$?l.cache.get(e,t):o;if(r!==o)n(r);else{const t=t=>{$&&l.cache.set(e,t),n(t)};try{const n=a.import;s(n)?new Promise((t=>t(n(e)))).then(t):c?fetch(e).then((e=>200===e.status?e.text().then(t):i(new Error(`${e.status} ${e.url}`)))):require("fs").readFile(e,"utf8",((e,n)=>e?i(e):t(n)))}catch(e){i(e)}}})),a)(...n),y=(...t)=>new Promise((e=>e(f))).then((s=>{const c=a.async?e:o;let f=p?l.cache.get(s,c):o;const h=f?f.toString():((e,t)=>{const o=e=>32===e||9===e||13===e||10===e,i=e=>95===e||e>=97&&e<=122||e>=65&&e<=90,s=e=>i(e)||e>=48&&e<=57,r=t.async?"async ":"",c=t=>e.charCodeAt(t);let l=0,f=0;const a=e.length;let u="";const h=(t=l,n="")=>{(t>f||n)&&(u+=`yield \`${e.slice(f,t)}${n}\`;\n`)},d=t=>{l>f&&(u+=t?`yield (${e.slice(f,l)});\n`:`yield this.escape(${e.slice(f,l)});\n`)},$=()=>{l>f&&(u+=e.slice(f,l))},p=t=>{throw new SyntaxError(`Expected end of ${t} at\n${e}`)},g=()=>p("declaration block @}"),b=e=>{const t=c(l+1);return 60===e&&123===t?(h(),l+=2,y(),!0):123===e&&61===t?(h(),l+=2,v(!1),!0):123===e&&126===t?(h(),l+=2,v(!0),!0):123===e&&64===t?(h(),l+=2,x(),!0):92===e?(h(l,"\\\\"),l++,f=l,!0):96===e?(h(l,"\\`"),l++,f=l,!0):36===e&&(h(l,"\\$"),l++,f=l,!0)},y=()=>{f=l;let e=!1;for(;l<a;){if(w())continue;const t=c(l);if(123===t){l++;const t=c(l);62===t?(e=!1,$(),l++,k()):61===t||126===t?(e=!1,$(),l++,v(126===t),f--):64===t?(e=!1,l--,$(),l+=2,x()):e=!0}else if(e&&o(t))l++;else if(e&&60===t)e=!1,$(),m();else{if(125===t&&62===c(l+1))return $(),l+=2,void(f=l);l++,e=!1}}p("logic block }>")},m=()=>{f=l;let e=-1;for(;l<a;){const t=c(l);if(62===t)l++,e=l;else if(e>=0&&o(t))l++;else if(e>=0&&w(!0));else{if(e>=0&&125===t)return h(e),void(f=l);b(t)||(l++,e=-1)}}p("html block >}")},k=()=>{f=l;let e=-1,t=-1,n=!1;for(;l<a;){const i=c(l);if(!n&&o(i))f++,l++;else if(b(i))n=!0,e=-1,t=-1;else if(60===i||o(i))t<0&&(t=l),60===i&&(e=l),l++;else if(e>=0&&o(i))l++;else{if(e>=0&&125===i)return n&&h(t),void(f=l);l++,e=-1,t=-1,n=!0}}p("text block <}")},v=t=>{f=l;const n=t?126:61;let i=!1,s=!1;for(;l<a;){const r=w();if(1===r){i=!0;continue}2!==r||i||(s=!0,f=l);const a=c(l);if(!i&&o(a))l++;else{if(a===n&&125===c(l+1))return i?d(t):s||(u+=`yield \`${e.slice(f,l)}\`;`),l+=2,void(f=l);l++,i=!0}}p("output block "+(t?"~}":"=}"))},w=(e=!1)=>{let t=0,n=0,o=0;for(;l<a;){const i=c(l);let s=0;if(e||t||n||39!==i&&34!==i&&96!==i)if(t&&92===i)l+=2;else{if(t&&i===t)return l++,1;if(t||n||47!==i||47!==(s=c(l+1))&&42!==s){if(47===n&&10===i)return l++,2;if(42===n&&42===i&&47===c(l+1))return l+=2,2;if(!n&&!t)return 0;l++}else n=s,l+=2,o=2}else t=i,l++,o=1}return o&&t&&p(`string ${String.fromCharCode(t)}`),o&&42===n&&p("comment */"),o},x=()=>{f=l;let t=0,n=!1,o="";for(;l<a;){let r=c(l);if(t){if(!n||!s(r)){if(n&&!s(r)){if(o=e.slice(f,l),r=P(),w(!0)&&(r=P()),40===r){l++,C(o);break}if(39===r||34===r||96===r){f=l,l++,j(o);break}S();break}S();break}l++}else{if(r=P(),w(!0)&&(r=P()),f=l,t=r,40===r){l++,C();break}if(39===r||34===r||96===r){l++,j();break}if(!i(t)){if(64===r&&125===c(l+1))return l+=2,void(f=l);S();break}l++,n=!0}}P(),f=l},S=()=>{for(;l<a;)if(w(!0));else{if(64===c(l)&&125===c(l+1)&&l>f)return u+=`let[${e.slice(f,l)}]=this;\n`,void(l+=2);l++}g()},j=t=>{for(;l<a;)if(w(!0));else{if(64===c(l)&&125===c(l+1)&&l>f)return t&&(u+=`let ${t}=`),u+=`this.import(${e.slice(f,l)})\n`,void(l+=2);l++}g()},C=t=>{f=l;let i="",s=0;for(;l<a;){const t=c(l);if(40===t)s++;else if(41===t){if(!s){i=e.slice(f,l),l++,P(),f=l;break}s--,l++}else l++}const d=u;let $=-1;for(u="";l<a;){const e=c(l);if(o(e))$=l,P();else{if(64===e&&125===c(l+1)){h($>-1?$:l);const e=u;return u=d,t&&(u+=`let ${t}=`),u+=`(${r}${n}*(${i}){${e}}.bind(this))\n`,void(l+=2)}b(e)||l++}}g()},P=()=>{let e=c(l);for(;l<a&&o(e);)l++,e=c(l);return e};for(;l<a;){const e=c(l);b(e)||l++}return h(),`return(${r}${n}*(){\n${u}}).call(this)`})(s,a);y.toString=()=>`${n} () {\n${h}\n}`;try{f||(f=Function(h),f.toString=()=>h,p&&l.cache.set(s,f,c)),a.verbose&&(console.groupCollapsed(`(${n} () {`),console.log(`${h}})\n(`,...t.reduce(((e,t)=>(e.length>0&&e.push(","),e.push(i(t)?`"${t}"`:t),e)),[]),")"),console.groupEnd());const e=(...e)=>y(...e);e[Symbol.iterator]=function*(){yield*t};for(let n=0;n<t.length;n++)e[n]=t[n];e.import=b,e.escape=g;for(const t in u)e[t]=u[t];return r(f.apply(e))}catch(e){throw e.message+=`\nat ${n} () {\n${h}\n})(${t.map((e=>i(e)?`"${e}"`:e)).join(", ")})`,e}}));return y};return l.options={},l.cache=(()=>{const o={[t]:{},[e]:{},[n]:{}};return{get:(e,t)=>o[t||n][e],set(e,s,r){o[i(s)?t:r||n][e]=s},delete(e,t){delete o[t||n][e]},clear(i){i?o[i]={}:(o[t]={},o[e]={},o[n]={})}}})(),l}));//# sourceMappingURL=nostache.min.js.map
