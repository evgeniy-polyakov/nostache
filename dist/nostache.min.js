!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nostache=t()}(this,(function(){"use strict";const e="async",t="import",o=e=>{if(e&&"function"==typeof e.next){let t="",n=()=>new Promise((t=>t(e.next()))).then((e=>e.done?t:o(e.value).then((e=>t+=e)).then(n)));return n().then((()=>t))}return new Promise((t=>t(e)))},n=Function("try{return this===window;}catch(e){return false;}")(),r=(i,c)=>{c=Object.assign(Object.assign({},r.options),c);const s=Object.assign(Object.assign({},r.options?r.options.extensions:void 0),c?c.extensions:void 0),l=!1===c.cache?0:c.cache||3,f=e=>o(e).then("function"==typeof c.escape?c.escape:e=>null==e?"":String(e).replace(/[&<>"']/g,(e=>`&#${e.charCodeAt(0)};`))),a=e=>(...o)=>r(new Promise(((o,i)=>{const s=1&l?r.cache.get(e,t):void 0;if(void 0!==s)o(s);else{const t=t=>{1&l&&r.cache.set(e,t),o(t)};try{const o=c.import;"function"==typeof o?new Promise((t=>t(o(e)))).then(t):n?fetch(e).then((e=>200===e.status?e.text().then(t):i(new Error(`${e.status} ${e.url}`)))):require("fs").readFile(e,"utf8",((e,o)=>e?i(e):t(o)))}catch(e){i(e)}}})),c)(...o),d=(...n)=>new Promise((e=>e(i))).then((i=>{const h=c.async?e:void 0;let u=2&l?r.cache.get(i,h):void 0;const p=u?u.toString():((e,o)=>{const n=e=>32===e||9===e||13===e||10===e,r=e=>95===e||e>=97&&e<=122||e>=65&&e<=90,i=e=>r(e)||e>=48&&e<=57,c=o.async?"async ":"";let s=0,l=0;const f=e.length;let a="";const d=(t=s,o="")=>{(t>l||o)&&(a+=`yield \`${e.slice(l,t)}${o}\`;\n`)},h=t=>{s>l&&(a+=t?`yield (${e.slice(l,s)});\n`:`yield this.escape(${e.slice(l,s)});\n`)},u=()=>{s>l&&(a+=e.slice(l,s))},p=t=>{throw new SyntaxError(`Expected end of ${t} at\n${e}`)},C=t=>{const o=e.charCodeAt(s+1);return 60===t&&123===o?(d(),s+=2,$(),!0):123===t&&61===o?(d(),s+=2,b(!1),!0):123===t&&126===o?(d(),s+=2,b(!0),!0):123===t&&64===o?(d(),s+=2,m(),!0):92===t?(d(s,"\\\\"),s++,l=s,!0):96===t?(d(s,"\\`"),s++,l=s,!0):36===t&&(d(s,"\\$"),s++,l=s,!0)},$=()=>{l=s;let t=!1;for(;s<f;){if(y())continue;const o=e.charCodeAt(s);if(123===o){s++;const o=e.charCodeAt(s);62===o?(t=!1,u(),s++,A()):61===o||126===o?(t=!1,u(),s++,b(126===o),l--):64===o?(t=!1,s--,u(),s+=2,m()):t=!0}else if(t&&n(o))s++;else if(t&&60===o)t=!1,u(),g();else{if(125===o&&62===e.charCodeAt(s+1))return u(),s+=2,void(l=s);s++,t=!1}}p("logic block }>")},g=()=>{l=s;let t=-1;for(;s<f;){const o=e.charCodeAt(s);if(62===o)s++,t=s;else if(t>=0&&n(o))s++;else if(t>=0&&y(!0));else{if(t>=0&&125===o)return d(t),void(l=s);C(o)||(s++,t=-1)}}p("html block >}")},A=()=>{l=s;let t=-1,o=-1,r=!1;for(;s<f;){const i=e.charCodeAt(s);if(!r&&n(i))l++,s++;else if(C(i))r=!0,t=-1,o=-1;else if(60===i||n(i))o<0&&(o=s),60===i&&(t=s),s++;else if(t>=0&&n(i))s++;else{if(t>=0&&125===i)return r&&d(o),void(l=s);s++,t=-1,o=-1,r=!0}}p("text block <}")},b=t=>{l=s;const o=t?126:61;let r=!1,i=!1;for(;s<f;){const c=y();if(1===c){r=!0;continue}2!==c||r||(i=!0,l=s);const f=e.charCodeAt(s);if(!r&&n(f))s++;else{if(f===o&&125===e.charCodeAt(s+1))return r?h(t):i||(a+=`yield \`${e.slice(l,s)}\`;`),s+=2,void(l=s);s++,r=!0}}p("output block "+(t?"~}":"=}"))},y=(t=!1)=>{let o=0,n=0,r=0;for(;s<f;){const i=e.charCodeAt(s);let c=0;if(t||o||n||39!==i&&34!==i&&96!==i)if(o&&92===i)s+=2;else{if(o&&i===o)return s++,1;if(o||n||47!==i||47!==(c=e.charCodeAt(s+1))&&42!==c){if(47===n&&10===i)return s++,2;if(42===n&&42===i&&47===e.charCodeAt(s+1))return s+=2,2;if(!n&&!o)return 0;s++}else n=c,s+=2,r=2}else o=i,s++,r=1}return r&&o&&p(`string ${String.fromCharCode(o)}`),r&&42===n&&p("comment */"),r},m=()=>{l=s;let t=0,o=!1,n="";for(;s<f;){let c=e.charCodeAt(s);if(t){if(!o||!i(c)){if(o&&!i(c)){if(n=e.slice(l,s),c=x(c),y(!0)&&(c=x(e.charCodeAt(s))),40===c){s++,w(n);break}if(39===c||34===c||96===c){l=s,s++,k(n);break}v();break}v();break}s++}else{if(c=x(c),y(!0)&&(c=x(e.charCodeAt(s))),l=s,t=c,40===c){s++,w();break}if(39===c||34===c||96===c){s++,k();break}if(!r(t)){if(64===c&&125===e.charCodeAt(s+1))return s+=2,void(l=s);v();break}s++,o=!0}}x(e.charCodeAt(s)),l=s},v=()=>{for(;s<f;)if(y(!0));else{if(64===e.charCodeAt(s)&&125===e.charCodeAt(s+1)&&s>l)return a+=`let[${e.slice(l,s)}]=this;\n`,void(s+=2);s++}p("declaration block @}")},k=o=>{for(;s<f;)if(y(!0));else{if(64===e.charCodeAt(s)&&125===e.charCodeAt(s+1)&&s>l)return o&&(a+=`let ${o}=`),a+=`this.${t}(${e.slice(l,s)})\n`,void(s+=2);s++}p("declaration block @}")},w=t=>{l=s;let o="",r=0;for(;s<f;){const t=e.charCodeAt(s);if(40===t)r++;else if(41===t){if(!r){o=e.slice(l,s),s++,x(e.charCodeAt(s)),l=s;break}r--,s++}else s++}const i=a;let h=-1;for(a="";s<f;){const r=e.charCodeAt(s);if(n(r))h=s,x(r);else{if(64===r&&125===e.charCodeAt(s+1)){d(h>-1?h:s);const e=a;return a=i,t&&(a+=`let ${t}=`),a+=`(${c}function*(${o}){${e}}.bind(this))\n`,void(s+=2)}C(r)||s++}}p("declaration block @}")},x=t=>{for(;s<f&&n(t);)s++,t=e.charCodeAt(s);return t};for(;s<f;){const t=e.charCodeAt(s);C(t)||s++}return d(),`return(${c}function*(){\n${a}}).call(this)`})(i,c);d.toString=()=>`function () {\n${p}\n}`;try{u||(u=Function(p),u.toString=()=>p,2&l&&r.cache.set(i,u,h)),c.verbose&&(console.groupCollapsed("(function () {"),console.log(`${p}})\n(`,...n.reduce(((e,t)=>(e.length>0&&e.push(","),e.push("string"==typeof t?`"${t}"`:t),e)),[]),")"),console.groupEnd());const e=(...e)=>d(...e);e[Symbol.iterator]=function*(){yield*n};for(let t=0;t<n.length;t++)e[t]=n[t];e.import=a,e.escape=f;for(const t in s)e[t]=s[t];return o(u.apply(e))}catch(e){throw e.message+=`\nat function () {\n${p}\n})(${n.map((e=>"string"==typeof e?`"${e}"`:e)).join(", ")})`,e}}));return d};return r.options={},r.cache=(()=>{let o={},n={},r={};return{get:(i,c)=>c===t?r[i]:c===e?n[i]:o[i],set(t,i,c){"string"==typeof i?r[t]=i:c===e?n[t]=i:o[t]=i},delete(i,c){c===t?delete r[i]:c===e?delete n[i]:delete o[i]},clear(){o={},n={},r={}}}})(),r}));//# sourceMappingURL=nostache.min.js.map
