!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Nostache=t()}(this,(function(){"use strict";const e={},t=async e=>String(await e).replace(/[&<>"']/g,(e=>`&#${e.charCodeAt(0)};`)),n=async e=>{let t="";for(;;){const o=await e.next();if(o.done)break;"function"==typeof o.value?.next?t+=await n(o.value):t+=await o.value}return t},o=r=>{if(e[r])return e[r];const c=(e=>{const t=e=>{if(e.length>1){const t={};for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=!0;return t}return e.charCodeAt(0)},n=t(" \t\r\n"),o=t("<"),r=t(">"),c=t("{"),s=t("}"),i=t("="),l=t("~"),a=t("/"),f=t("*"),u=t("\n"),d=t("\\"),h=t("'"),p=t('"'),y=t("`"),C=t("$");let A=0,g=0;const $=e.length;let b="";const m=(t=A,n="")=>{(t>g||n)&&(b+=`yield \`${e.slice(g,t)}${n}\`;\n`)},v=t=>{A>g&&(b+=t?`yield (${e.slice(g,A)});\n`:`yield this.escapeHtml(${e.slice(g,A)});\n`)},k=()=>{A>g&&(b+=`${e.slice(g,A)}`)},w=t=>t===o&&e.charCodeAt(A+1)===c?(m(),A+=2,H(),!0):t===c&&e.charCodeAt(A+1)===i?(m(),A+=2,j(!1),!0):t===c&&e.charCodeAt(A+1)===l?(m(),A+=2,j(!0),!0):t===d?(m(A,"\\\\"),A++,g=A,!0):t===y?(m(A,"\\`"),A++,g=A,!0):t===C&&(m(A,"\\$"),A++,g=A,!0),H=()=>{g=A;let t=!0;for(;A<$;){if(T()){t=!1;continue}const a=e.charCodeAt(A);if(a===c){A++;const n=e.charCodeAt(A);n===r?(t=!1,k(),A++,S()):n===i||n===l?(t=!1,k(),A++,j(n===l),g--):t=!0}else if(t&&n[a])A++;else if(t&&a===o)t=!1,k(),x();else{if(a===s&&e.charCodeAt(A+1)===r){k(),A+=2;break}A++,t=!1}}g=A},x=()=>{g=A;let t=-1;for(;A<$;){const o=e.charCodeAt(A);if(o===r)A++,t=A;else if(t>=0&&n[o])A++;else{if(t>=0&&o===s){m(t);break}w(o)||(A++,t=-1)}}g=A},S=()=>{g=A;let t=-1,r=-1,c=!1;for(;A<$;){const i=e.charCodeAt(A);if(!c&&n[i])g++,A++;else if(c&&(i===o||n[i]))r<0&&(r=A),i===o&&(t=A),A++;else if(t>=0&&n[i])A++;else{if(t>=0&&i===s){m(r);break}w(i)||(A++,t=-1,r=-1),c=!0}}g=A},j=t=>{g=A;const o=t?l:i;let r=!1;for(;A<$;){if(T()){r=!0;continue}const c=e.charCodeAt(A);if(!r&&n[c])A++;else{if(c===o&&e.charCodeAt(A+1)===s){r&&v(t),A+=2;break}A++,r=!0}}g=A},T=()=>{let t=0,n=0,o=!1;for(;A<$;){const r=e.charCodeAt(A);let c=0;if(t||n||r!==h&&r!==p&&r!==y)if(t&&r===d)A+=2;else{if(t&&r===t)return t=0,A++,!0;if(t||n||r!==a||(c=e.charCodeAt(A+1))!==a&&c!==f)if(n===a&&r===u)n=0,A++;else{if(n===f&&r===f&&e.charCodeAt(A+1)===a)return n=0,A+=2,!0;if(!n&&!t)return!1;A++}else n=c,A+=2,o=!0}else t=r,A++,o=!0}return o};for(;A<$;){const t=e.charCodeAt(A);w(t)||A++}return m(),`return(async function*(){\n${b}}).call(this)`})(r),s=async(...e)=>{try{s.verbose&&(console.groupCollapsed("(function () {"),console.log(`${c}})\n(`,...e.reduce(((e,t)=>(e.length>0&&e.push(","),e.push("string"==typeof t?`"${t}"`:t),e)),[]),")"),console.groupEnd());const t=(...e)=>s(...e);t[Symbol.iterator]=function*(){yield*e};for(let n=0;n<e.length;n++)t[n]=e[n];t.escapeHtml=s.escapeHtml;const o=Function(c).apply(t);return n(o)}catch(t){throw t.message+=`\nat function () {\n${c}\n})(${e.map((e=>"string"==typeof e?`"${e}"`:e)).join(", ")})`,t}};return s.verbose=o.verbose,s.escapeHtml=t,s.toString=()=>c,e[r]=s,s};return o.verbose=!1,o.escapeHtml=t,o}));//# sourceMappingURL=nostache.min.js.map
